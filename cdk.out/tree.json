{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.221.0"},"children":{"CaminhoAssombradoLeaderboard":{"id":"CaminhoAssombradoLeaderboard","path":"CaminhoAssombradoLeaderboard","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.221.0"},"children":{"ScoresTable":{"id":"ScoresTable","path":"CaminhoAssombradoLeaderboard/ScoresTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.221.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CaminhoAssombradoLeaderboard/ScoresTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.221.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"scoreId","attributeType":"S"},{"attributeName":"createdAt","attributeType":"S"},{"attributeName":"gameType","attributeType":"S"},{"attributeName":"score","attributeType":"N"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"ScoreIndex","keySchema":[{"attributeName":"gameType","keyType":"HASH"},{"attributeName":"score","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"scoreId","keyType":"HASH"},{"attributeName":"createdAt","keyType":"RANGE"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"tableName":"caminho-assombrado-scores"}}},"ScalingRole":{"id":"ScalingRole","path":"CaminhoAssombradoLeaderboard/ScoresTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.221.0","metadata":[]}}}},"GetTop10ScoresFunction":{"id":"GetTop10ScoresFunction","path":"CaminhoAssombradoLeaderboard/GetTop10ScoresFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.221.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"CaminhoAssombradoLeaderboard/GetTop10ScoresFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.221.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"CaminhoAssombradoLeaderboard/GetTop10ScoresFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.221.0","metadata":[]}},"Resource":{"id":"Resource","path":"CaminhoAssombradoLeaderboard/GetTop10ScoresFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.221.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"CaminhoAssombradoLeaderboard/GetTop10ScoresFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.221.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CaminhoAssombradoLeaderboard/GetTop10ScoresFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.221.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ScoresTable6CB35494","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ScoresTable6CB35494","Arn"]},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"GetTop10ScoresFunctionServiceRoleDefaultPolicyBA211019","roles":[{"Ref":"GetTop10ScoresFunctionServiceRole40C57C3E"}]}}}}}}},"Resource":{"id":"Resource","path":"CaminhoAssombradoLeaderboard/GetTop10ScoresFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.221.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"zipFile":"\n        const { DynamoDBClient } = require('@aws-sdk/client-dynamodb');\n        const { DynamoDBDocumentClient, QueryCommand } = require('@aws-sdk/lib-dynamodb');\n\n        const client = new DynamoDBClient({});\n        const docClient = DynamoDBDocumentClient.from(client);\n\n        exports.handler = async (event) => {\n          console.log('GetTop10Scores event:', JSON.stringify(event, null, 2));\n          \n          try {\n            const params = {\n              TableName: process.env.SCORES_TABLE_NAME,\n              IndexName: 'ScoreIndex',\n              KeyConditionExpression: 'gameType = :gameType',\n              ExpressionAttributeValues: {\n                ':gameType': 'caminho-assombrado'\n              },\n              ScanIndexForward: false, // Sort in descending order (highest scores first)\n              Limit: 10\n            };\n\n            const result = await docClient.send(new QueryCommand(params));\n            \n            const response = {\n              scores: result.Items || [],\n              total: result.Count || 0\n            };\n\n            return {\n              statusCode: 200,\n              headers: {\n                'Content-Type': 'application/json',\n                'Access-Control-Allow-Origin': '*',\n                'Access-Control-Allow-Methods': 'GET, POST, OPTIONS',\n                'Access-Control-Allow-Headers': 'Content-Type, Authorization',\n              },\n              body: JSON.stringify(response),\n            };\n          } catch (error) {\n            console.error('Error fetching top 10 scores:', error);\n            return {\n              statusCode: 500,\n              headers: {\n                'Content-Type': 'application/json',\n                'Access-Control-Allow-Origin': '*',\n              },\n              body: JSON.stringify({ error: 'Internal server error' }),\n            };\n          }\n        };\n      "},"environment":{"variables":{"SCORES_TABLE_NAME":{"Ref":"ScoresTable6CB35494"}}},"handler":"index.handler","role":{"Fn::GetAtt":["GetTop10ScoresFunctionServiceRole40C57C3E","Arn"]},"runtime":"nodejs18.x","timeout":10}}}}},"GetAllScoresFunction":{"id":"GetAllScoresFunction","path":"CaminhoAssombradoLeaderboard/GetAllScoresFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.221.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"CaminhoAssombradoLeaderboard/GetAllScoresFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.221.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"CaminhoAssombradoLeaderboard/GetAllScoresFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.221.0","metadata":[]}},"Resource":{"id":"Resource","path":"CaminhoAssombradoLeaderboard/GetAllScoresFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.221.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"CaminhoAssombradoLeaderboard/GetAllScoresFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.221.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CaminhoAssombradoLeaderboard/GetAllScoresFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.221.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ScoresTable6CB35494","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ScoresTable6CB35494","Arn"]},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"GetAllScoresFunctionServiceRoleDefaultPolicy83B6B781","roles":[{"Ref":"GetAllScoresFunctionServiceRole524EB739"}]}}}}}}},"Resource":{"id":"Resource","path":"CaminhoAssombradoLeaderboard/GetAllScoresFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.221.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"zipFile":"\n        const { DynamoDBClient } = require('@aws-sdk/client-dynamodb');\n        const { DynamoDBDocumentClient, QueryCommand } = require('@aws-sdk/lib-dynamodb');\n\n        const client = new DynamoDBClient({});\n        const docClient = DynamoDBDocumentClient.from(client);\n\n        exports.handler = async (event) => {\n          console.log('GetAllScores event:', JSON.stringify(event, null, 2));\n          \n          try {\n            const queryParams = event.queryStringParameters || {};\n            const limit = parseInt(queryParams.limit) || 50;\n            const nextToken = queryParams.nextToken;\n\n            const params = {\n              TableName: process.env.SCORES_TABLE_NAME,\n              IndexName: 'ScoreIndex',\n              KeyConditionExpression: 'gameType = :gameType',\n              ExpressionAttributeValues: {\n                ':gameType': 'caminho-assombrado'\n              },\n              ScanIndexForward: false, // Sort in descending order (highest scores first)\n              Limit: limit\n            };\n\n            if (nextToken) {\n              params.ExclusiveStartKey = JSON.parse(Buffer.from(nextToken, 'base64').toString());\n            }\n\n            const result = await docClient.send(new QueryCommand(params));\n            \n            const response = {\n              scores: result.Items || [],\n              hasMore: !!result.LastEvaluatedKey\n            };\n\n            if (result.LastEvaluatedKey) {\n              response.nextToken = Buffer.from(JSON.stringify(result.LastEvaluatedKey)).toString('base64');\n            }\n\n            return {\n              statusCode: 200,\n              headers: {\n                'Content-Type': 'application/json',\n                'Access-Control-Allow-Origin': '*',\n                'Access-Control-Allow-Methods': 'GET, POST, OPTIONS',\n                'Access-Control-Allow-Headers': 'Content-Type, Authorization',\n              },\n              body: JSON.stringify(response),\n            };\n          } catch (error) {\n            console.error('Error fetching all scores:', error);\n            return {\n              statusCode: 500,\n              headers: {\n                'Content-Type': 'application/json',\n                'Access-Control-Allow-Origin': '*',\n              },\n              body: JSON.stringify({ error: 'Internal server error' }),\n            };\n          }\n        };\n      "},"environment":{"variables":{"SCORES_TABLE_NAME":{"Ref":"ScoresTable6CB35494"}}},"handler":"index.handler","role":{"Fn::GetAtt":["GetAllScoresFunctionServiceRole524EB739","Arn"]},"runtime":"nodejs18.x","timeout":15}}}}},"SubmitScoreFunction":{"id":"SubmitScoreFunction","path":"CaminhoAssombradoLeaderboard/SubmitScoreFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.221.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"CaminhoAssombradoLeaderboard/SubmitScoreFunction/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.221.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"CaminhoAssombradoLeaderboard/SubmitScoreFunction/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.221.0","metadata":[]}},"Resource":{"id":"Resource","path":"CaminhoAssombradoLeaderboard/SubmitScoreFunction/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.221.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"CaminhoAssombradoLeaderboard/SubmitScoreFunction/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.221.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CaminhoAssombradoLeaderboard/SubmitScoreFunction/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.221.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["ScoresTable6CB35494","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ScoresTable6CB35494","Arn"]},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"SubmitScoreFunctionServiceRoleDefaultPolicyFD2072FD","roles":[{"Ref":"SubmitScoreFunctionServiceRole3CD1DDCA"}]}}}}}}},"Resource":{"id":"Resource","path":"CaminhoAssombradoLeaderboard/SubmitScoreFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.221.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"zipFile":"\n        const { DynamoDBClient } = require('@aws-sdk/client-dynamodb');\n        const { DynamoDBDocumentClient, PutCommand } = require('@aws-sdk/lib-dynamodb');\n        const { randomUUID } = require('crypto');\n\n        const client = new DynamoDBClient({});\n        const docClient = DynamoDBDocumentClient.from(client);\n\n        exports.handler = async (event) => {\n          console.log('SubmitScore event:', JSON.stringify(event, null, 2));\n          \n          try {\n            const body = JSON.parse(event.body || '{}');\n            \n            // Validate required fields\n            const { firstName, lastName, score, character, weapon, difficulty } = body;\n            \n            if (!firstName || !lastName || typeof score !== 'number') {\n              return {\n                statusCode: 400,\n                headers: {\n                  'Content-Type': 'application/json',\n                  'Access-Control-Allow-Origin': '*',\n                },\n                body: JSON.stringify({ error: 'Missing required fields: firstName, lastName, score' }),\n              };\n            }\n\n            // Validate character\n            if (!['boy', 'girl'].includes(character)) {\n              return {\n                statusCode: 400,\n                headers: {\n                  'Content-Type': 'application/json',\n                  'Access-Control-Allow-Origin': '*',\n                },\n                body: JSON.stringify({ error: 'Invalid character. Must be \"boy\" or \"girl\"' }),\n              };\n            }\n\n            // Validate weapon\n            if (!['katana', 'laser', 'baseball', 'bazooka'].includes(weapon)) {\n              return {\n                statusCode: 400,\n                headers: {\n                  'Content-Type': 'application/json',\n                  'Access-Control-Allow-Origin': '*',\n                },\n                body: JSON.stringify({ error: 'Invalid weapon' }),\n              };\n            }\n\n            // Validate difficulty\n            if (!['easy', 'medium', 'impossible'].includes(difficulty)) {\n              return {\n                statusCode: 400,\n                headers: {\n                  'Content-Type': 'application/json',\n                  'Access-Control-Allow-Origin': '*',\n                },\n                body: JSON.stringify({ error: 'Invalid difficulty' }),\n              };\n            }\n\n            // Validate score range\n            if (score < 0 || score > 999999) {\n              return {\n                statusCode: 400,\n                headers: {\n                  'Content-Type': 'application/json',\n                  'Access-Control-Allow-Origin': '*',\n                },\n                body: JSON.stringify({ error: 'Score must be between 0 and 999999' }),\n              };\n            }\n\n            const scoreId = randomUUID();\n            const createdAt = new Date().toISOString();\n            \n            const scoreItem = {\n              scoreId,\n              gameType: 'caminho-assombrado',\n              firstName: firstName.trim(),\n              lastName: lastName.trim(),\n              score,\n              character,\n              weapon,\n              difficulty,\n              createdAt\n            };\n\n            const params = {\n              TableName: process.env.SCORES_TABLE_NAME,\n              Item: scoreItem\n            };\n\n            await docClient.send(new PutCommand(params));\n\n            return {\n              statusCode: 201,\n              headers: {\n                'Content-Type': 'application/json',\n                'Access-Control-Allow-Origin': '*',\n                'Access-Control-Allow-Methods': 'GET, POST, OPTIONS',\n                'Access-Control-Allow-Headers': 'Content-Type, Authorization',\n              },\n              body: JSON.stringify(scoreItem),\n            };\n          } catch (error) {\n            console.error('Error submitting score:', error);\n            return {\n              statusCode: 500,\n              headers: {\n                'Content-Type': 'application/json',\n                'Access-Control-Allow-Origin': '*',\n              },\n              body: JSON.stringify({ error: 'Internal server error' }),\n            };\n          }\n        };\n      "},"environment":{"variables":{"SCORES_TABLE_NAME":{"Ref":"ScoresTable6CB35494"}}},"handler":"index.handler","role":{"Fn::GetAtt":["SubmitScoreFunctionServiceRole3CD1DDCA","Arn"]},"runtime":"nodejs18.x","timeout":15}}}}},"GameLeaderboardApi":{"id":"GameLeaderboardApi","path":"CaminhoAssombradoLeaderboard/GameLeaderboardApi","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.RestApi","version":"2.221.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CaminhoAssombradoLeaderboard/GameLeaderboardApi/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnRestApi","version":"2.221.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::RestApi","aws:cdk:cloudformation:props":{"description":"API for managing game scores and leaderboard","name":"Caminho Assombrado Leaderboard API"}}},"CloudWatchRole":{"id":"CloudWatchRole","path":"CaminhoAssombradoLeaderboard/GameLeaderboardApi/CloudWatchRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.221.0","metadata":[]},"children":{"ImportCloudWatchRole":{"id":"ImportCloudWatchRole","path":"CaminhoAssombradoLeaderboard/GameLeaderboardApi/CloudWatchRole/ImportCloudWatchRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.221.0","metadata":[]}},"Resource":{"id":"Resource","path":"CaminhoAssombradoLeaderboard/GameLeaderboardApi/CloudWatchRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.221.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"apigateway.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AmazonAPIGatewayPushToCloudWatchLogs"]]}]}}}}},"Account":{"id":"Account","path":"CaminhoAssombradoLeaderboard/GameLeaderboardApi/Account","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnAccount","version":"2.221.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Account","aws:cdk:cloudformation:props":{"cloudWatchRoleArn":{"Fn::GetAtt":["GameLeaderboardApiCloudWatchRole6E8A740D","Arn"]}}}},"Deployment":{"id":"Deployment","path":"CaminhoAssombradoLeaderboard/GameLeaderboardApi/Deployment","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Deployment","version":"2.221.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CaminhoAssombradoLeaderboard/GameLeaderboardApi/Deployment/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnDeployment","version":"2.221.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Deployment","aws:cdk:cloudformation:props":{"description":"API for managing game scores and leaderboard","restApiId":{"Ref":"GameLeaderboardApi3D395492"}}}}}},"DeploymentStage.prod":{"id":"DeploymentStage.prod","path":"CaminhoAssombradoLeaderboard/GameLeaderboardApi/DeploymentStage.prod","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Stage","version":"2.221.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CaminhoAssombradoLeaderboard/GameLeaderboardApi/DeploymentStage.prod/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnStage","version":"2.221.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Stage","aws:cdk:cloudformation:props":{"deploymentId":{"Ref":"GameLeaderboardApiDeployment5713927D5e852030c66d25dd080b32516b5345b3"},"restApiId":{"Ref":"GameLeaderboardApi3D395492"},"stageName":"prod"}}}}},"Endpoint":{"id":"Endpoint","path":"CaminhoAssombradoLeaderboard/GameLeaderboardApi/Endpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.221.0"}},"Default":{"id":"Default","path":"CaminhoAssombradoLeaderboard/GameLeaderboardApi/Default","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.ResourceBase","version":"2.221.0","metadata":[]},"children":{"OPTIONS":{"id":"OPTIONS","path":"CaminhoAssombradoLeaderboard/GameLeaderboardApi/Default/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.221.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CaminhoAssombradoLeaderboard/GameLeaderboardApi/Default/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.221.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Fn::GetAtt":["GameLeaderboardApi3D395492","RootResourceId"]},"restApiId":{"Ref":"GameLeaderboardApi3D395492"}}}}}},"scores":{"id":"scores","path":"CaminhoAssombradoLeaderboard/GameLeaderboardApi/Default/scores","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.221.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CaminhoAssombradoLeaderboard/GameLeaderboardApi/Default/scores/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.221.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["GameLeaderboardApi3D395492","RootResourceId"]},"pathPart":"scores","restApiId":{"Ref":"GameLeaderboardApi3D395492"}}}},"OPTIONS":{"id":"OPTIONS","path":"CaminhoAssombradoLeaderboard/GameLeaderboardApi/Default/scores/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.221.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CaminhoAssombradoLeaderboard/GameLeaderboardApi/Default/scores/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.221.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"GameLeaderboardApiscores0DABE98B"},"restApiId":{"Ref":"GameLeaderboardApi3D395492"}}}}}},"GET":{"id":"GET","path":"CaminhoAssombradoLeaderboard/GameLeaderboardApi/Default/scores/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.221.0","metadata":[]},"children":{"ApiPermission.CaminhoAssombradoLeaderboardGameLeaderboardApiAC2A526B.GET..scores":{"id":"ApiPermission.CaminhoAssombradoLeaderboardGameLeaderboardApiAC2A526B.GET..scores","path":"CaminhoAssombradoLeaderboard/GameLeaderboardApi/Default/scores/GET/ApiPermission.CaminhoAssombradoLeaderboardGameLeaderboardApiAC2A526B.GET..scores","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.221.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GetAllScoresFunctionD7E8C073","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:eu-west-1:058264503354:",{"Ref":"GameLeaderboardApi3D395492"},"/",{"Ref":"GameLeaderboardApiDeploymentStageprod2C781EF4"},"/GET/scores"]]}}}},"ApiPermission.Test.CaminhoAssombradoLeaderboardGameLeaderboardApiAC2A526B.GET..scores":{"id":"ApiPermission.Test.CaminhoAssombradoLeaderboardGameLeaderboardApiAC2A526B.GET..scores","path":"CaminhoAssombradoLeaderboard/GameLeaderboardApi/Default/scores/GET/ApiPermission.Test.CaminhoAssombradoLeaderboardGameLeaderboardApiAC2A526B.GET..scores","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.221.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GetAllScoresFunctionD7E8C073","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:eu-west-1:058264503354:",{"Ref":"GameLeaderboardApi3D395492"},"/test-invoke-stage/GET/scores"]]}}}},"Resource":{"id":"Resource","path":"CaminhoAssombradoLeaderboard/GameLeaderboardApi/Default/scores/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.221.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:eu-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["GetAllScoresFunctionD7E8C073","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"GameLeaderboardApiscores0DABE98B"},"restApiId":{"Ref":"GameLeaderboardApi3D395492"}}}}}},"POST":{"id":"POST","path":"CaminhoAssombradoLeaderboard/GameLeaderboardApi/Default/scores/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.221.0","metadata":[]},"children":{"ApiPermission.CaminhoAssombradoLeaderboardGameLeaderboardApiAC2A526B.POST..scores":{"id":"ApiPermission.CaminhoAssombradoLeaderboardGameLeaderboardApiAC2A526B.POST..scores","path":"CaminhoAssombradoLeaderboard/GameLeaderboardApi/Default/scores/POST/ApiPermission.CaminhoAssombradoLeaderboardGameLeaderboardApiAC2A526B.POST..scores","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.221.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["SubmitScoreFunctionC95ED479","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:eu-west-1:058264503354:",{"Ref":"GameLeaderboardApi3D395492"},"/",{"Ref":"GameLeaderboardApiDeploymentStageprod2C781EF4"},"/POST/scores"]]}}}},"ApiPermission.Test.CaminhoAssombradoLeaderboardGameLeaderboardApiAC2A526B.POST..scores":{"id":"ApiPermission.Test.CaminhoAssombradoLeaderboardGameLeaderboardApiAC2A526B.POST..scores","path":"CaminhoAssombradoLeaderboard/GameLeaderboardApi/Default/scores/POST/ApiPermission.Test.CaminhoAssombradoLeaderboardGameLeaderboardApiAC2A526B.POST..scores","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.221.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["SubmitScoreFunctionC95ED479","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:eu-west-1:058264503354:",{"Ref":"GameLeaderboardApi3D395492"},"/test-invoke-stage/POST/scores"]]}}}},"Resource":{"id":"Resource","path":"CaminhoAssombradoLeaderboard/GameLeaderboardApi/Default/scores/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.221.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:eu-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["SubmitScoreFunctionC95ED479","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"GameLeaderboardApiscores0DABE98B"},"restApiId":{"Ref":"GameLeaderboardApi3D395492"}}}}}},"top10":{"id":"top10","path":"CaminhoAssombradoLeaderboard/GameLeaderboardApi/Default/scores/top10","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.221.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CaminhoAssombradoLeaderboard/GameLeaderboardApi/Default/scores/top10/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.221.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"GameLeaderboardApiscores0DABE98B"},"pathPart":"top10","restApiId":{"Ref":"GameLeaderboardApi3D395492"}}}},"OPTIONS":{"id":"OPTIONS","path":"CaminhoAssombradoLeaderboard/GameLeaderboardApi/Default/scores/top10/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.221.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"CaminhoAssombradoLeaderboard/GameLeaderboardApi/Default/scores/top10/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.221.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,Authorization'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"GameLeaderboardApiscorestop101E8CFAB0"},"restApiId":{"Ref":"GameLeaderboardApi3D395492"}}}}}},"GET":{"id":"GET","path":"CaminhoAssombradoLeaderboard/GameLeaderboardApi/Default/scores/top10/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.221.0","metadata":[]},"children":{"ApiPermission.CaminhoAssombradoLeaderboardGameLeaderboardApiAC2A526B.GET..scores.top10":{"id":"ApiPermission.CaminhoAssombradoLeaderboardGameLeaderboardApiAC2A526B.GET..scores.top10","path":"CaminhoAssombradoLeaderboard/GameLeaderboardApi/Default/scores/top10/GET/ApiPermission.CaminhoAssombradoLeaderboardGameLeaderboardApiAC2A526B.GET..scores.top10","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.221.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GetTop10ScoresFunction1C75FCA3","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:eu-west-1:058264503354:",{"Ref":"GameLeaderboardApi3D395492"},"/",{"Ref":"GameLeaderboardApiDeploymentStageprod2C781EF4"},"/GET/scores/top10"]]}}}},"ApiPermission.Test.CaminhoAssombradoLeaderboardGameLeaderboardApiAC2A526B.GET..scores.top10":{"id":"ApiPermission.Test.CaminhoAssombradoLeaderboardGameLeaderboardApiAC2A526B.GET..scores.top10","path":"CaminhoAssombradoLeaderboard/GameLeaderboardApi/Default/scores/top10/GET/ApiPermission.Test.CaminhoAssombradoLeaderboardGameLeaderboardApiAC2A526B.GET..scores.top10","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.221.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["GetTop10ScoresFunction1C75FCA3","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":execute-api:eu-west-1:058264503354:",{"Ref":"GameLeaderboardApi3D395492"},"/test-invoke-stage/GET/scores/top10"]]}}}},"Resource":{"id":"Resource","path":"CaminhoAssombradoLeaderboard/GameLeaderboardApi/Default/scores/top10/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.221.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":apigateway:eu-west-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["GetTop10ScoresFunction1C75FCA3","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"GameLeaderboardApiscorestop101E8CFAB0"},"restApiId":{"Ref":"GameLeaderboardApi3D395492"}}}}}}}}}}}}}},"ApiGatewayUrl":{"id":"ApiGatewayUrl","path":"CaminhoAssombradoLeaderboard/ApiGatewayUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.221.0"}},"ScoresTableName":{"id":"ScoresTableName","path":"CaminhoAssombradoLeaderboard/ScoresTableName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.221.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"CaminhoAssombradoLeaderboard/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"CaminhoAssombradoLeaderboard/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.221.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"CaminhoAssombradoLeaderboard/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.221.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"CaminhoAssombradoLeaderboard/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.221.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}}}